import{u as c,j as p,s as m}from"./index-DJc-2Em1.js";const f={__name:"Auth",setup(g){const e=c(),s=p(),a=m(),o=n(a.params.token);function n(t){try{var u=t.split(".")[1],i=u.replace(/-/g,"+").replace(/_/g,"/"),l=decodeURIComponent(window.atob(i).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(l)}catch{return!1}}if(o){console.log("Logado");const t={nome:o.usuario.nome,email:o.usuario.email,imagem:o.usuario.imagem,token:a.params.token,nomeInstituicao:o.nomeInstituicao};e.logout(),e.login(t,o.iss),s.push("/")}else console.log("Não foi possível logar - token inválido"),e.logout(),s.push("/login");return()=>{}}};export{f as default};
